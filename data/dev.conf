<VirtualHost *:80>
    ServerAdmin info@$domainName
    DocumentRoot $cacheTop
    ServerName $domainName
    ServerAlias wwww.$domainName
    ErrorLog  /var/log/$domainName-error.log
    CustomLog  /var/log/$domainName-access.log combined
</VirtualHost>

<VirtualHost *:443>
    ServerAdmin info@$domainName
    DocumentRoot $cacheTop
    ServerName $domainName
    ServerAlias wwww.$domainName
    ErrorLog  /var/log/$domainName-error.log
    CustomLog  /var/log/$domainName-access.log combined
    
    SSLEngine on
    SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
</VirtualHost>

<IfModule alias_module>
    # Ordering of aliasing rules is important
    AliasMatch (.*\.png$) "$srcTop/$1"
    AliasMatch (.*\.jpg$) "$srcTop/$1"
    AliasMatch (.*\.css$) "$srcTop/$1"
    AliasMatch (.*\.pdf$) "$buildTop/$1"

    AliasMatch (.*\.bz2$) "$cacheTop/$1"
    AliasMatch (.*\.deb$) "$cacheTop/$1"
    AliasMatch (.*\.dmg$) "$cacheTop/$1"
    AliasMatch (.*\.rpm$) "$cacheTop/$1"

    Alias /personal $buildTop/personal

    ScriptAliasMatch ^(.*$) "$binDir/$1"

</IfModule>

<Directory "$srcTop">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>

<Directory "$buildTop">
    AllowOverride None
    Options None
    Order allow,deny
    Allow from all
</Directory>
